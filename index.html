<!-- Navigation tabs -->
<nav>
  <button class="tabBtn active" data-tab="auto">Autonomous</button>
  <button class="tabBtn" data-tab="teleop">Teleop</button>
  <button class="tabBtn" data-tab="endgame">Endgame</button>
  <button class="tabBtn" data-tab="notes">Notes / Defense</button>
</nav>

<form id="scoutForm">
  <label>Team #</label><input type="number" id="team" required>
  <label>Match #</label><input type="number" id="match" required>

  <!-- Tabs content -->
  <div class="tabContent" id="auto"> ... </div>
  <div class="tabContent" id="teleop" style="display:none;"> ... </div>
  <div class="tabContent" id="endgame" style="display:none;"> ... </div>
  <div class="tabContent" id="notes" style="display:none;"> ... </div>

  <button type="button" id="nextBtn">Next</button>
</form>

<div id="qrcode" style="display:none;"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
<script>
const tabs = Array.from(document.querySelectorAll('.tabBtn'));
const contents = Array.from(document.querySelectorAll('.tabContent'));
const nextBtn = document.getElementById('nextBtn');
const qrDiv = document.getElementById('qrcode');
const qr = new QRious({ element: document.createElement('canvas'), size: 300 });
qrDiv.appendChild(qr.element);

let currentIndex = 0;

// Function to show a tab by index
function showTab(index) {
  tabs.forEach((t,i) => t.classList.toggle('active', i === index));
  contents.forEach((c,i) => c.style.display = (i === index) ? 'block' : 'none');
  // Show QR only on the last page
  qrDiv.style.display = (index === contents.length - 1) ? 'block' : 'none';
  nextBtn.textContent = (index === contents.length - 1) ? 'Generate QR Code' : 'Next';
}

showTab(currentIndex);

nextBtn.addEventListener('click', () => {
  if (currentIndex < contents.length - 1) {
    currentIndex++;
    showTab(currentIndex);
  } else {
    // Last page â†’ generate QR
    const data = {
      team: document.getElementById('team').value,
      match: document.getElementById('match').value,
      autoFuel: document.getElementById('autoFuel').value,
      autoPos: document.getElementById('autoPos').value,
      teleopFuel: document.getElementById('teleopFuel').value,
      obstacles: document.getElementById('obstacles').value,
      climb: document.getElementById('climb').value,
      autoNotes: document.getElementById('autoNotes').value,
      teleopDefense: document.getElementById('teleopDefense').value,
      endNotes: document.getElementById('endNotes').value
    };
    qr.value = JSON.stringify(data);
    alert("QR Code generated! Scan to save this match data.");
  }
});
</script>
