<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FRC 2026 REBUILT Scouting</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; background: #eef2f7; }
h1 { text-align: center; color: #00274C; margin-bottom: 20px;}
nav { text-align: center; margin-bottom: 20px; }
nav button { margin: 0 5px; padding: 10px 15px; border: none; border-radius: 6px; cursor: pointer; background:#0055A4; color:white;}
nav button.active { background: #003D73; }
form { background: white; padding: 18px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); max-width: 540px; margin: auto;}
label { font-weight: bold; margin-top: 8px; display: block; }
input, select, textarea { width: 100%; margin: 6px 0 12px; padding: 10px; border: 1px solid #aaa; border-radius: 6px; box-sizing: border-box;}
button[type="button"] { width: 100%; background: #0055A4; color: white; padding: 12px; border: 0; border-radius: 6px; font-size: 16px; cursor: pointer; margin-top:10px;}
button[type="button"]:hover { background: #003D73;}
.tabContent { display: none; }
.counter { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
.counter button { flex: 1; padding: 10px; background: #0055A4; color: white; border: none; border-radius: 6px; cursor: pointer; }
.counter span { flex: 1; text-align: center; font-size: 18px; }
.timer { text-align: center; margin-top: 12px; font-size: 18px; font-weight: bold; }
#qrcode { text-align: center; margin-top: 20px; }
</style>
</head>
<body>

<h1>FRC 2026 — REBUILT Scouting</h1>

<nav>
  <button class="tabBtn active" data-tab="auto">Autonomous</button>
  <button class="tabBtn" data-tab="teleop">Teleop</button>
  <button class="tabBtn" data-tab="endgame">Endgame</button>
  <button class="tabBtn" data-tab="notes">Notes / Defense</button>
</nav>

<form id="scoutForm">
  <label>Team #</label><input type="number" id="team" required>
  <label>Match #</label><input type="number" id="match" required>

  <!-- Autonomous Tab -->
  <div class="tabContent" id="auto">
    <label>Fuel Scored (Auto)</label>
    <div class="counter">
      <button type="button" data-target="autoFuel" data-action="decrement">-</button>
      <span id="autoFuel">0</span>
      <button type="button" data-target="autoFuel" data-action="increment">+</button>
    </div>
    <label>Starting Position</label>
    <select id="autoPos">
      <option value="Left">Left</option>
      <option value="Center">Center</option>
      <option value="Right">Right</option>
    </select>
  </div>

  <!-- Teleop Tab -->
  <div class="tabContent" id="teleop">
    <label>Fuel Scored (Teleop)</label>
    <div class="counter">
      <button type="button" data-target="teleopFuel" data-action="decrement">-</button>
      <span id="teleopFuel">0</span>
      <button type="button" data-target="teleopFuel" data-action="increment">+</button>
    </div>
    <label>Obstacles Crossed</label>
    <div class="counter">
      <button type="button" data-target="obstacles" data-action="decrement">-</button>
      <span id="obstacles">0</span>
      <button type="button" data-target="obstacles" data-action="increment">+</button>
    </div>
  </div>

  <!-- Endgame Tab -->
  <div class="tabContent" id="endgame">
    <label>Climb Level</label>
    <select id="climb">
      <option value="None">None</option>
      <option value="Low">Low</option>
      <option value="Mid">Mid</option>
      <option value="High">High</option>
      <option value="Traversal">Traversal</option>
    </select>
    <div class="timer">
      <span id="timerDisplay">00:00:00</span>
      <div style="margin-top:10px;">
        <button type="button" id="startTimer">Start</button>
        <button type="button" id="pauseTimer">Pause</button>
        <button type="button" id="resetTimer">Reset</button>
      </div>
    </div>
  </div>

  <!-- Notes / Defense Tab -->
  <div class="tabContent" id="notes">
    <label>Autonomous Notes</label><textarea id="autoNotes" placeholder="Extra observations..."></textarea>
    <label>Teleop / Defense Notes</label><textarea id="teleopDefense" placeholder="Defense, fouls, strategy..."></textarea>
    <label>Endgame Notes / Penalties</label><textarea id="endNotes" placeholder="Final observations, penalties..."></textarea>
  </div>

  <button type="button" id="nextBtn">Next</button>
</form>

<div id="qrcode" style="display:none;"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
<script>
// Tab Navigation
const tabs = Array.from(document.querySelectorAll('.tabBtn'));
const contents = Array.from(document.querySelectorAll('.tabContent'));
const nextBtn = document.getElementById('nextBtn');
const qrDiv = document.getElementById('qrcode');
const qr = new QRious({ element: document.createElement('canvas'), size: 300 });
qrDiv.appendChild(qr.element);

let currentIndex = 0;

function showTab(index) {
  tabs.forEach((t,i) => t.classList.toggle('active', i === index));
  contents.forEach((c,i) => c.style.display = (i === index) ? 'block' : 'none');
  qrDiv.style.display = (index === contents.length - 1) ? 'block' : 'none';
  nextBtn.textContent = (index === contents.length - 1) ? 'Generate QR Code' : 'Next';
}

// Initialize first tab
showTab(currentIndex);

nextBtn.addEventListener('click', () => {
  if (currentIndex < contents.length - 1) {
    currentIndex++;
    showTab(currentIndex);
  } else {
    const data = {
      team: document.getElementById('team').value,
      match: document.getElementById('match').value,
      autoFuel: document.getElementById('autoFuel').textContent,
      autoPos: document.getElementById('autoPos').value,
      teleopFuel: document.getElementById('teleopFuel').textContent,
      obstacles: document.getElementById('obstacles').textContent,
      climb: document.getElementById('climb').value,
      autoNotes: document.getElementById('autoNotes').value,
      teleopDefense: document.getElementById('teleopDefense').value,
      endNotes: document.getElementById('endNotes').value
    };
    qr.value = JSON.stringify(data);
    alert("QR Code generated! Scan to save this match data.");
  }
});

// Manual tab click
tabs.forEach((tab, idx) => {
  tab.addEventListener('click', () => {
    currentIndex = idx;
    showTab(currentIndex);
  });
});

// Counter buttons
document.querySelectorAll('.counter button').forEach(btn => {
  btn.addEventListener('click', () => {
    const target = document.getElementById(btn.dataset.target);
    let val = parseInt(target.textContent);
    if (btn.dataset.action === "increment") val++;
    else if (btn.dataset.action === "decrement" && val > 0) val--;
    target.textContent = val;
  });
});

// Endgame Timer
let timerInterval = null;
let totalmilliseconds = 0;
const display = document.getElementById('timerDisplay');

function updateTimer() {
  let min = Math.floor(totalmilliseconds / 60000).toString().padStart(2,'0');
  let sec = ((totalmilliseconds % 60000)/1000).toString().padStart(2,'0');
  let milli = ((totalmilliseconds % 1000)/10).toString().padStart(2, '0');
  display.textContent = `${min}:${sec}:${milli}`;
}

document.getElementById('startTimer').addEventListener('click', () => {
  if (!timerInterval) {
    timerInterval = setInterval(() => {
      totalmilliseconds++;
      updateTimer();
    }, 1000000);
  }
});

document.getElementById('pauseTimer').addEventListener('click', () => {
  clearInterval(timerInterval);
  timerInterval = null;
});

document.getElementById('resetTimer').addEventListener('click', () => {
  clearInterval(timerInterval);
  timerInterval = null;
  totalmilliseconds = 0;
  updateTimer();
});
</script>

</body>
</html>
